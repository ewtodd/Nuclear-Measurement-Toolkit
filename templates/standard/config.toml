# ============================================================================
# DETECTOR INFORMATION
# ============================================================================
[detector]
type = "scintillator"
name = "YAP:Ce"
psd_capable = true

# ============================================================================
# DATA SOURCES
# id should start at 0 and increment from there
# manual definition is forced to ensure you know which is which!
# ============================================================================

[[source]]
id = 0
name = "Am-241"
path = "/home/e-work/LABDATA/ANSG/CeYAP/May12-14/YAP_am241_new_settings/RAW/DataR_CH0@DT5730B_680_YAP_alphawithxrays.root"

[[source]]
id = 1
name = "Cs-137"
path = "/home/e-work/LABDATA/ANSG/CeYAP/May12-14/YAP_cs137_new_settings/RAW/DataR_CH0@DT5730B_680_YAP_cs137_new_settings.root"

[[source]]
id = 2
name = "Na-22"
path = "/home/e-work/LABDATA/ANSG/CeYAP/May12-14/YAP_am241_na22_new_settings/RAW/DataR_CH0@DT5730B_680_YAP_am241_na22_new_settings.root"

[[source]]
id = 3
name = "Am-241 & Cs-137"
path = "/home/e-work/LABDATA/ANSG/CeYAP/May12-14/YAP_am241_cs137_new_settings/RAW/DataR_CH0@DT5730B_680_YAP_am241_cs137_new_settings.root"

# ============================================================================
# WAVEFORM PROCESSING
# ============================================================================

[processing]
polarity = "negative"
trigger_threshold = 0.15
pre_samples = 17
post_samples = 190
max_events = -1  # -1 for all events
verbose = true
store_waveforms = true
output_file = "ej309_processed.root"

# ============================================================================
# HISTOGRAM CONFIGURATION
# ============================================================================

[histogram]
light_output_min = 0
light_output_max = 3000
light_output_bins = 400

# Scintillator-specific: integral histograms
integral_min = 0
integral_max = 150000
integral_bins = 400

output_file = "ej309_histograms.root"

# ============================================================================
# CHARGE COMPARISON FOR PSD
# ============================================================================

[charge_comparison]
enabled = true
short_gate = 12
long_gate = 180

first_source = "Am-241"
first_particle_type = "alpha"

second_source = "Cs-137"
second_particle_type = "gamma"

optimize_gates = true
light_output_min = 500.0
light_output_max = 1200.0

[charge_comparison.gate_optimization]
short_gate_min = 7
short_gate_max = 20
short_gate_step = 1

long_gate_min = 110
long_gate_max = 200
long_gate_step = 10

# ============================================================================
# CALIBRATION
# ============================================================================

[calibration]
enabled = true
method = "linear"
include_zero = true

# Calibration points
[[calibration.peak]]
source = "Am-241"
energy = 5486.0
label = "alpha"

[[calibration.peak]]
source = "Cs-137"
energy = 661.7
label = "662"

# ============================================================================
# ANALYSIS OPTIONS
# ============================================================================

[analysis]
average_waveforms_file = "ej309_avg_waveforms.root"
